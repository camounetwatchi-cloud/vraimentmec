// MODIFIEZ LA FONCTION reloadPosition() dans game.html

async function reloadPosition() {
    const btn = document.getElementById('reloadPositionBtn');
    btn.disabled = true;
    btn.textContent = '‚è≥ Chargement...';

    try {
        // MODIFICATION ICI: Utilise /api/random-position au lieu de /api/generate
        const response = await fetch(`${API_URL}/api/random-position`, {
            method: 'GET',
            credentials: 'include'
        });

        const data = await response.json();

        if (data.success) {
            loadPosition(data.data.fen);
            updateStatus('‚úÖ Nouvelle position charg√©e depuis le cache !', 'playing');
            console.log('üìä Position:', data.data);
        } else {
            updateStatus('‚ùå ' + data.error, 'waiting');
        }
    } catch (error) {
        console.error('‚ùå Erreur:', error);
        updateStatus('‚ùå Erreur de connexion', 'waiting');
    } finally {
        btn.disabled = false;
        btn.textContent = 'üîÑ Nouvelle position';
    }
}
